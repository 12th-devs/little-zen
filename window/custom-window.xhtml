<?xml version="1.0"?>
<?xml-stylesheet href="chrome://global/skin/" type="text/css"?>
<?xml-stylesheet href="custom-window.css" type="text/css"?>

<window id="littleZenWindow"
        title="Little Zen Window"
        xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
        windowtype="navigator:browser"
        width="1200"
        height="800"
        persist="width height screenX screenY"
        titlebar="false">

  <script type="application/javascript" src="chrome://global/content/globalOverlay.js"/>
  <script type="application/javascript" src="custom-window.js"/>

  <!-- Extension Compatibility: Popup elements for context menus -->
  <popupset id="mainPopupSet">
    <menupopup id="contentAreaContextMenu">
      <menuitem id="context-inspect" label="Inspect" hidden="true"/>
    </menupopup>
  </popupset>

  <!-- Workspace Menu Popup -->
  <menupopup id="workspace-menu-popup" position="after_start">
    <!-- Dynamically populated -->
  </menupopup>

  <vbox flex="1">
    <!-- Window Controls -->
    <hbox id="window-header" class="window-header">
      <spacer flex="1"/>
      <hbox id="window-controls">
        <toolbarbutton id="minimize-btn" class="control-btn" label="−"/>
        <toolbarbutton id="maximize-btn" class="control-btn" label="□"/>
        <toolbarbutton id="close-btn" class="control-btn" label="×"/>
      </hbox>
    </hbox>

    <!-- Navigation Bar -->
    <toolbar id="navigation-bar" class="nav-toolbar">
      <hbox id="nav-controls">
        <toolbarbutton id="back-btn" class="nav-btn" label="←" disabled="true"/>
        <toolbarbutton id="forward-btn" class="nav-btn" label="→" disabled="true"/>
        <toolbarbutton id="refresh-btn" class="nav-btn" label="↻"/>
      </hbox>
      
      <hbox id="address-bar" flex="1">
        <textbox id="url-input" flex="1" placeholder="Enter URL or search..."/>
      </hbox>
      
      <hbox id="workspace-control-container">
        <label id="workspace-indicator" value="Space" class="workspace-indicator"/>
        <label id="workspace-chevron" value="▼" class="workspace-chevron" popup="workspace-menu-popup"/>
      </hbox>
    </toolbar>

    <!-- Content Area -->
    <vbox id="content-area" flex="1">
      <!-- Tab Container Shim for gBrowser API - Must be <tabs> element -->
      <tabs id="tabbrowser-tabs" class="tabbrowser-tabs" hidden="true">
        <!-- Mock tab container for Zen Window Sync compatibility -->
      </tabs>
      
      <browser id="web-content" 
               flex="1" 
               type="content" 
               src="about:blank"
               remote="true"
               maychangeremoteness="true"
               disablehistory="false"
               disablesecurity="false"
               autocompletepopup="PopupAutoComplete"
               messagemanagergroup="browsers"
               tooltip="aHTMLTooltip"
               contextmenu="contentAreaContextMenu"/>
    </vbox>

    <!-- Status Bar -->
    <statusbar id="status-bar">
      <statusbarpanel id="status-text" label="Ready" flex="1"/>
      <progressmeter id="progress-bar" mode="determined" value="0" hidden="true"/>
    </statusbar>
  </vbox>
</window>